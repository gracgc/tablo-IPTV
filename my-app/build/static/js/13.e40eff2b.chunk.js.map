{"version":3,"sources":["common/FormsControls/FormsControls.js","common/FormsControls/FormsControls.module.css","components/MenuPanel/Auth/Auth.module.css","components/MenuPanel/Auth/Auth.jsx"],"names":["FormControl","input","meta","props","child","hasError","touched","error","className","c","formControl","blockArea","children","Input","restProps","InputReadOnly","readOnly","InputPassword","type","module","exports","LoginReduxForm","reduxForm","form","onSubmit","handleSubmit","loginForm","appName","placeholder","name","component","errorStyle","formSummaryError","loginButton","socketID","Auth","dispatch","useDispatch","useSelector","state","appPage","isAuth","authPage","history","useHistory","useEffect","socket","emit","pathname","location","push","on","deviceType","loginPage","formData","login","password"],"mappings":"8PAIMA,EAAc,SAAC,GAAmC,EAAlCC,MAAmC,IAA5BC,EAA2B,EAA3BA,KAAgBC,GAAW,EAArBC,MAAqB,yCAC9CC,EAAWH,EAAKI,SAAWJ,EAAKK,MACtC,OACI,yBAAKC,UAAWC,IAAEC,YAAc,KAAOL,EAAWI,IAAEF,MAAQ,KACxD,yBAAKC,UAAWC,IAAEE,WACbR,EAAMS,SACNP,GAAY,6BAAMH,EAAKK,UAW3BM,EAAQ,SAACV,GAAW,IACtBF,EAAoCE,EAApCF,MAAuBa,GAAaX,EAA7BD,KAA6BC,EAAvBC,MADQ,YACeD,EADf,2BAE5B,OAAO,kBAACH,EAAgBG,EAAO,2CAAWF,EAAWa,MAU5CC,EAAgB,SAACZ,GAAW,IAC9BF,EAAoCE,EAApCF,MAAuBa,GAAaX,EAA7BD,KAA6BC,EAAvBC,MADgB,YACOD,EADP,2BAEpC,OAAO,kBAACH,EAAgBG,EAAO,yCAAOa,UAAU,GAAUf,EAAWa,MAG5DG,EAAgB,SAACd,GAAW,IAC9BF,EAAoCE,EAApCF,MAAuBa,GAAaX,EAA7BD,KAA6BC,EAAvBC,MADgB,YACOD,EADP,2BAEpC,OAAO,kBAACH,EAAgBG,EAAO,yCAAOe,KAAM,YAAgBjB,EAAWa,O,oBCvC3EK,EAAOC,QAAU,CAAC,YAAc,mCAAmC,MAAQ,6BAA6B,iBAAmB,wCAAwC,UAAY,mC,oBCA/KD,EAAOC,QAAU,CAAC,UAAY,wBAAwB,UAAY,wBAAwB,YAAc,0BAA0B,QAAU,wB,iCCD5I,2HAiCMC,EAAiBC,YAAU,CAACC,KAAM,SAAjBD,EAtBN,SAACnB,GAEd,OACI,6BACI,0BAAMqB,SAAUrB,EAAMsB,cAClB,yBAAKjB,UAAWC,IAAEiB,WACd,yBAAKlB,UAAWC,IAAEkB,SAAlB,cACA,kBAAC,IAAD,CAAOC,YAAa,uCAAUC,KAAM,WAC7BC,UAAWb,MACjBd,EAAMI,OAAS,yBAAKC,UAAWuB,IAAWC,kBAAmB7B,EAAMI,OACpE,4BAAQC,UAAWC,IAAEwB,aAArB,kCAGA,6BARJ,oEASoB9B,EAAM+B,eA2D3BC,UAhDF,SAAChC,GAEV,IAAMiC,EAAWC,cAEXH,EAAWI,aACb,SAAAC,GAAK,OAAIA,EAAMC,QAAQN,YAGrBO,EAASH,aACX,SAAAC,GAAK,OAAIA,EAAMG,SAASD,UAGxBE,EAAUC,cA6Bd,OArBAC,qBAAU,WACFJ,IACAK,IAAOC,KAAP,YAAyB,CAACC,SAAUL,EAAQM,SAASD,SAAUP,OAAQA,IACvEE,EAAQO,KAAK,YAElB,CAACT,IAIJI,qBAAU,WACNC,IAAOK,GAAP,uBAA0BjB,IAAY,SAAAkB,GACf,eAAfA,GACAT,EAAQO,KAAK,kBACI,UAAfE,GACFT,EAAQO,KAAK,eAGtB,CAAChB,IAKA,yBAAK1B,UAAWC,IAAE4C,WACd,kBAAChC,EAAD,CAAgBG,SA7BP,SAAC8B,GACdlB,EAASmB,YAAMD,EAASE,YA4BgBtB,SAAUA","file":"static/js/13.e40eff2b.chunk.js","sourcesContent":["import React from \"react\";\r\nimport c from \"./FormsControls.module.css\";\r\n\r\n\r\nconst FormControl = ({input, meta, child, ...props}) => {\r\n    const hasError = meta.touched && meta.error;\r\n    return (\r\n        <div className={c.formControl + \" \" + (hasError ? c.error : \"\")}>\r\n            <div className={c.blockArea}>\r\n                {props.children}\r\n                {hasError && <div>{meta.error}</div>}\r\n            </div>\r\n        </div>\r\n    )\r\n};\r\n\r\nexport const Textarea = (props) => {\r\n    const {input, meta, child, ...restProps} = props;\r\n    return <FormControl {...props}><textarea {...input} {...restProps} /></FormControl>\r\n};\r\n\r\nexport const Input = (props) => {\r\n    const {input, meta, child, ...restProps} = props;\r\n    return <FormControl {...props}><input {...input} {...restProps} /></FormControl>\r\n};\r\n\r\nexport const InputImg = (props) => {\r\n    const {input, meta, child, ...restProps} = props;\r\n    return <input type=\"file\"\r\n                  hidden\r\n                  enctype=\"multipart/form-data\" {...input} {...restProps} />\r\n};\r\n\r\nexport const InputReadOnly = (props) => {\r\n    const {input, meta, child, ...restProps} = props;\r\n    return <FormControl {...props}><input readOnly={true} {...input} {...restProps}/></FormControl>\r\n};\r\n\r\nexport const InputPassword = (props) => {\r\n    const {input, meta, child, ...restProps} = props;\r\n    return <FormControl {...props}><input type={'password'} {...input} {...restProps} /></FormControl>\r\n};\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"formControl\":\"FormsControls_formControl__ceCDJ\",\"error\":\"FormsControls_error__5xkgN\",\"formSummaryError\":\"FormsControls_formSummaryError__1R-9d\",\"blockArea\":\"FormsControls_blockArea__3Sl2l\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loginPage\":\"Auth_loginPage__3MtlQ\",\"loginForm\":\"Auth_loginForm__iUSeb\",\"loginButton\":\"Auth_loginButton__hekRD\",\"appName\":\"Auth_appName__MlijS\"};","import React, {useEffect, useState} from 'react'\r\nimport c from './Auth.module.css'\r\nimport {useDispatch, useSelector} from \"react-redux\";\r\nimport {Field, reduxForm, reset} from \"redux-form\";\r\nimport {InputPassword} from \"../../../common/FormsControls/FormsControls\";\r\nimport {login} from \"../../../redux/auth_reducer\";\r\nimport errorStyle from '../../../common/FormsControls/FormsControls.module.css'\r\nimport socket from \"../../../socket/socket\";\r\nimport {useHistory} from \"react-router\";\r\n\r\n\r\nconst AuthForm = (props) => {\r\n\r\n    return (\r\n        <div>\r\n            <form onSubmit={props.handleSubmit}>\r\n                <div className={c.loginForm}>\r\n                    <div className={c.appName}>TABLO-BETA</div>\r\n                    <Field placeholder={'Пароль'} name={'password'}\r\n                           component={InputPassword}/>\r\n                    {props.error && <div className={errorStyle.formSummaryError}>{props.error}</div>}\r\n                    <button className={c.loginButton}>\r\n                        Войти\r\n                    </button>\r\n                    <br/>\r\n                    ID устройства: {props.socketID}\r\n                </div>\r\n            </form>\r\n        </div>\r\n    )\r\n};\r\n\r\n\r\nconst LoginReduxForm = reduxForm({form: 'login'})(AuthForm);\r\n\r\n\r\nconst Auth = (props) => {\r\n\r\n    const dispatch = useDispatch();\r\n\r\n    const socketID = useSelector(\r\n        state => state.appPage.socketID\r\n    );\r\n\r\n    const isAuth = useSelector(\r\n        state => state.authPage.isAuth\r\n    );\r\n\r\n    let history = useHistory();\r\n\r\n    const onSubmit = (formData) => {\r\n        dispatch(login(formData.password));\r\n    };\r\n\r\n\r\n\r\n    useEffect(() => {\r\n        if (isAuth) {\r\n            socket.emit(`addDevice`, {pathname: history.location.pathname, isAuth: isAuth})\r\n            history.push(\"/menu\");\r\n        }\r\n    }, [isAuth])\r\n\r\n\r\n\r\n    useEffect(() => {\r\n        socket.on(`setDevicePage${socketID}`, deviceType => {\r\n            if (deviceType === 'Main Tablo') {\r\n                history.push(\"/tabloClient/0\");\r\n            } if (deviceType === 'Video') {\r\n                history.push(\"/video\");\r\n            }\r\n        })\r\n    }, [socketID])\r\n\r\n\r\n\r\n    return (\r\n        <div className={c.loginPage}>\r\n            <LoginReduxForm onSubmit={onSubmit} socketID={socketID}/>\r\n        </div>\r\n    )\r\n};\r\n\r\nexport default Auth;\r\n"],"sourceRoot":""}